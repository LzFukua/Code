###说一下HBase的架构吧
1. HMaster负责region的负载均衡以及迁移恢复和DDL操作
2. HRegionServer负责管理多个Region的DML操作
3. Zookeeper负责记录meta表位置和服务器的心跳信息



###HBased的特点
1. 可以存很多很多的数据
2. 以列为单位进行存储
3. 对于空的列不占用资源所以会有稀疏性
4. 数据多版本

---
###HBase和Hive的区别
两者其实是不同的东西
**Hive** 是基于hadoop的工具,将sql转化为**MR任务**的工具
**Hbase**是hadoop的非关系型的分布式,以kv形式存储的数据库

---
###HBase的RowKey设置原则
1. RowKey的长度原则:长度一般不要超过16字节
   1. 数据是以KV形式存储,过长了如果数据过多那就会影响存储效率
   2. memStore会缓存数据在内存,过长也会使得内存有效利用率降低
2. RowKey散列原则   
   主要是散开就不会触发热点问题
3. RowKey的唯一原则
   保证每个RowKey都是唯一的 


---      
###描述HBase中scan和get的功能以及实现的异同？
1. scan是全表扫描
2. get是根据行键获取一行数据
   
---

###请详细描述HBase中一个cell的结构？
**cell** 是由rowkey以及列族+属性唯一确定的一个单元,cell数据是没有类型的,全是以字节码的形式存储

---

###简述一下HBase中compact用途是什么,什么时候触发,分为哪两种,有什么区别,有什么配置参数?

1. 在HBase中每当有memStore数据flush到磁盘之后,就会形成一个storeFlie,当storeFlie达到一定数量就会进行compact.
2. compact作用:
   1. 合并文件
   2. 清除过期数据和墓碑标记的数据
   3. 提高读写效率
3. 一共有两种合并方式,大合并和小合并
   1. 小合并根据参数选择处理那些小的文件并进行合并,不会进行更新操作
   2. 大合并对整个列族下的所有storeFlie进行合并,最终合并出一个文件


---

###每天百亿数据存入HBase，如何保证数据的存储正确和在规定的时间里全部录入完毕，不残留数据？(需求)
1. 由于数据量很大,所以不可能用普通写入,这时候就会用到bulkLoad批量导入,这就可以有效的解决数据量大和速度慢的问题
2. 保证数据的正确就需要考虑到RowKey,region分区,列族的设计

###HRegionServer宕机如何处理？
Zookeeper首先会监控HRegionServer的上下线情况,如果发现它挂了,就会立即通知HMaster,然后HMaster就会让它负责的region转移到别的机器上,并且会根据WAL回滚日志的操作恢复机器上memStore丢失的数据


###Hbase中的memstore是用来做什么的？
hbase为了保证读取性能,所以hfile里面的rowkey是有序的所以不能将数据直接写到磁盘中,否则变更时候就效率就会低,那memStore就是内存的作用.

###HBase在进行模型设计时重点在什么地方？一张表中定义多少个Column Family最合适？为什么？
列族的个数具体看表的数据,一般来说划分标准是看一些数据的访问频度,比如说一张表里面有些列访问相对频繁,而另一些列访问很少,这时候可以把这张表划分成两个列族,分开存储,就可以提高访问效率

---

###直接将时间戳作为行健，在写入单个region 时候会发生热点问题，为什么呢？
region在Hbase中是按字典排序的,所以如果按时间戳进行排序就会造成一系列的时间操作都会堆积在一起那就会存到一个region里,这样它的region变大,而别的region是小的,加载数据就会变得慢.

---

###请描述如何解决HBase中region太小和region太大带来的冲突？
Region过小就会发送很多次compact操作,每次都会读一遍重写写到HDFS上,占用IO,如果设置的region过大,就会造成多次分裂,region就会下线影响访问.
所以建议是region大小为256M

---

###为什么不建议在 HBase 中使用过多的列族?
1. region过多有可能会导致分布不均匀的情况,就会使得查询速度效率低
2. 就算分布均匀了,那也会在region分裂的时候查询数据的时候横跨的region多
3. 而且如果列族过多,列族里有个memstore会占内存消耗内存
